<!DOCTYPE html>
<html>
<head>
  <title>Particle Automata</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    .particle {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #000;
    }

    .collision {
      background-color: #fff;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
    var particles = [];
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    function createParticle() {
      var particle = {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        type: Math.random() * 3,
      };
      particles.push(particle);
    }

    function collide(particle1, particle2) {
      if (particle1.type == particle2.type) {
        return null;
      } else {
        return particle1.type;
      }
    }

    function update() {
      var newParticles = [];
      for (var i = 0; i < particles.length; i++) {
        var particle = particles[i];
        var x = particle.x;
        var y = particle.y;
        var type = particle.type;

        particle.x += Math.random() * 0.1;
        particle.y += Math.random() * 0.1;

        if (particle.x < 0 || particle.x > canvas.width) {
          particle.x = 0;
        }
        if (particle.y < 0 || particle.y > canvas.height) {
          particle.y = 0;
        }

        var collision = collide(particles[i], particles[(i + 1) % particles.length]);
        if (collision !== null) {
          particle.type = collision;
        }

        newParticles.push(particle);
      }
      particles = newParticles;
    }

    setInterval(update, 100);

    for (var i = 0; i < 15; i++) {
      createParticle();
    }

    window.addEventListener("keydown", function(event) {
      if (event.keyCode == 32) {
        createParticle();
      }
    });
  </script>
</body>
</html>
